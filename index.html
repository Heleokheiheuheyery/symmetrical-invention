<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Game Player</title>
    <meta name="description" content="Game Player (formerly something else we don't talk about). Play games safely if allowed. Some games may not work. DO NOT SHARE. Only during free time or out of school. If you get caught, I WILL SNITCH. Also, if your teacher has GoGuardian pls do not play I am begging you.">
    <style>
        :root {
            --bg-color: #121212;
            --text-color: #e0e0e0;
            --accent-color: #1E88E5;
            --accent-hover: #1565C0;
            --border-color: #333;
            --loading-color: #FF9800;
            --error-color: #FF5252;
        }
        body {
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            padding: 0;
            text-align: center;
            background: var(--bg-color);
            color: var(--text-color);
        }
        .page {
            display: none;
            padding: 50px 20px;
        }
        .active {
            display: block;
        }
        button {
            font-size: 1.2rem;
            padding: 15px 30px;
            margin: 10px;
            border: none;
            border-radius: 8px;
            background-color: var(--accent-color);
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: var(--accent-hover);
        }
        #dropbox {
            border: 3px dashed var(--border-color);
            padding: 50px;
            margin-top: 30px;
            color: #aaa;
            font-size: 1.2em;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        #dropbox.loading::before {
            content: '';
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 10;
        }
        #dropbox.loading::after {
            content: 'Loading...';
            display: block;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--loading-color);
            font-size: 1.5em;
            z-index: 11;
        }
        #video-dropzone {
            border: 3px dashed var(--border-color);
            padding: 50px;
            margin-top: 30px;
            color: #aaa;
            font-size: 1.2em;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        #video-dropzone.loading::before {
            content: '';
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 10;
        }
        #video-dropzone.loading::after {
            content: 'Loading...';
            display: block;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--loading-color);
            font-size: 1.5em;
            z-index: 11;
        }
        iframe {
            width: 100%;
            height: 100vh;
            border: none;
            background: var(--bg-color);
        }
        .description {
            font-size: 0.95em;
            margin: 20px auto;
            max-width: 700px;
            color: #bbb;
            padding: 10px;
            line-height: 1.6;
        }
        .warning {
            color: #FF5252;
            font-weight: bold;
            margin-top: 20px;
            font-size: 1.1em;
        }
        #video-container {
            margin-top: 10px;
        }
        video {
            max-width: 80%;
            height: auto;
            border: 1px solid var(--border-color);
        }
        .error-message {
            color: var(--error-color);
            margin-top: 10px;
            font-size: 1em;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div id="home" class="page active">
        <h1>Game Player</h1>
        <div class="description">
            (Formerly something else... <strong>we don't speak about it.</strong>)<br><br>
            A chill place to play games (some may not work).<br><br>
            <strong>DO NOT SHARE THIS LINK.</strong><br><br>
            Only use this during teacher-approved free time or out of school.<br><br>
            <strong>IF YOU GET CAUGHT, I WILL SNITCH ON EVERYONE ðŸ˜‚.</strong><br><br>
            If you don't like snitches, just chill and play games in peace ðŸŽ®.
        </div>
        <div class="warning">
            ðŸš¨ If your teacher has GoGuardian pls do not play I am begging ðŸš¨
        </div>
        <br>
        <button onclick="goTo('drive')">Go to Google Drive</button>
        <button onclick="goTo('player')">Play an HTML File</button>
        <button onclick="goTo('movies')">Button to moovsies</button>
        <button onclick="goTo('video')">Insert video(any video format) here</button>
    </div>

    <div id="drive" class="page">
        <h1>Google Drive Folder</h1>
        <button onclick="openDrive()">Open Drive Folder</button><br><br>
        <button onclick="goTo('home')">Back to Home</button>
    </div>

    <div id="player" class="page">
        <h1>Drag & Play HTML</h1>
        <div id="dropbox" tabindex="0">
            Drag an HTML file here and press Enter
        </div>
        <div id="html-error-message" class="error-message"></div>
        <button onclick="goTo('home')">Back to Home</button>
    </div>

    <div id="movies" class="page">
        <h1>Moovsies</h1>
        <button onclick="openMovies()">Go to Moovsies Folder</button><br><br>
        <button onclick="goTo('home')">Back to Home</button>
    </div>

    <div id="video" class="page">
        <h1>Drag & Play Video</h1>
        <div id="video-dropzone">
            Drag a video file here to play (.mp4 supported directly)
        </div>
        <div id="video-error-message" class="error-message"></div>
        <div id="video-container" style="display: none;">
            <video id="dropped-video" controls style="width: 80%; max-width: 800px; height: auto; border: 1px solid var(--border-color);"></video>
        </div>
        <button onclick="goTo('home')">Back to Home</button>
    </div>

    <script>
        function goTo(page) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(page).classList.add('active');
        }

        function openDrive() {
            window.open('https://drive.google.com/drive/folders/1ou3mI5xJVQv8Vt_MvwejPtf7zStSnU-s?usp=sharing', '_blank');
        }

        function openMovies() {
            window.open('https://drive.google.com/drive/folders/1nvLWCEh2eBFoht1f_eX53CjWx7RJtzUG?usp=sharing', '_blank');
        }

        // Drag and Drop logic for HTML player
        let fileContent = "";
        const dropbox = document.getElementById('dropbox');
        const htmlErrorMessage = document.getElementById('html-error-message');
        const MAX_FILE_SIZE_GB = 1;
        const MAX_FILE_SIZE_BYTES = MAX_FILE_SIZE_GB * 1024 * 1024 * 1024;

        dropbox.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropbox.style.borderColor = 'var(--accent-color)';
        });

        dropbox.addEventListener('dragleave', (e) => {
            e.preventDefault();
            dropbox.style.borderColor = 'var(--border-color)';
        });

        dropbox.addEventListener('drop', (e) => {
            e.preventDefault();
            dropbox.style.borderColor = 'var(--border-color)';
            dropbox.classList.add('loading');
            htmlErrorMessage.textContent = '';
            fileContent = ""; // Reset previous content

            const file = e.dataTransfer.files[0];
            if (file) {
                if (file.size > MAX_FILE_SIZE_BYTES) {
                    htmlErrorMessage.textContent = `Hold your horses! It looks like your file is over ${MAX_FILE_SIZE_GB}GB. We are working on making it accessible. Don't worry!`;
                    dropbox.classList.remove('loading');
                    return;
                }
                if (file.type === "text/html") {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        fileContent = e.target.result;
                        dropbox.classList.remove('loading');
                        dropbox.focus();
                    };
                    reader.onerror = (error) => {
                        htmlErrorMessage.textContent = `Ruh roh raggy, here is what went wrong: Error reading the HTML file (${error.message})`;
                        dropbox.classList.remove('loading');
                    };
                    reader.readAsText(file);
                } else if (file.type === "text/css") {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const style = document.createElement('style');
                        style.textContent = e.target.result;
                        document.head.appendChild(style);
                        dropbox.classList.remove('loading');
                        htmlErrorMessage.textContent = 'CSS file injected.';
                    };
                    reader.onerror = (error) => {
                        htmlErrorMessage.textContent = `Ruh roh raggy, here is what went wrong: Error reading the CSS file (${error.message})`;
                        dropbox.classList.remove('loading');
                    };
                    reader.readAsText(file);
                } else if (file.type === "text/javascript") {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const script = document.createElement('script');
                        script.textContent = e.target.result;
                        document.body.appendChild(script);
                        dropbox.classList.remove('loading');
                        htmlErrorMessage.textContent = 'JavaScript file injected.';
                    };
                    reader.onerror = (error) => {
                        htmlErrorMessage.textContent = `Ruh roh raggy, here is what went wrong: Error reading the JavaScript file (${error.message})`;
                        dropbox.classList.remove('loading');
                    };
                    reader.readAsText(file);
                }
                 else if (file.type.startsWith('video/mp4')) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        document.body.innerHTML = '';
                        const video = document.createElement('video');
                        video.controls = true;
                        video.style.width = '80%';
                        video.style.maxWidth = '800px';
                        video.style.height = 'auto';
                        video.style.border = '1px solid var(--border-color)';
                        video.src = e.target.result;
                        document.body.appendChild(video);
                        dropbox.classList.remove('loading');
                    };
                    reader.onerror = (error) => {
                        htmlErrorMessage.textContent = `Ruh roh raggy, here is what went wrong: Error reading the video file (${error.message})`;
                        dropbox.classList.remove('loading');
                    };
                    reader.readAsDataURL(file);
                }
                else {
                    htmlErrorMessage.textContent = "Ruh roh raggy, here is what went wrong: That file type isn't directly playable here. Try an HTML file.";
                    dropbox.classList.remove('loading');
                }
            } else {
                dropbox.classList.remove('loading');
            }
        });

        dropbox.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && fileContent) {
                document.body.innerHTML = '';
                const iframe = document.createElement('iframe');
                document.body.appendChild(iframe);

                const doc = iframe.contentWindow.document;
                doc.open();
                doc.write(fileContent);
                doc.close();
            }
        });

        // Drag and Drop logic for video player
        const videoDropzone = document.getElementById('video-dropzone');
        const videoContainer = document.getElementById('video-container');
        const droppedVideo = document.getElementById('dropped-video');
        const videoErrorMessage = document.getElementById('video-error-message');

        videoDropzone.addEventListener('dragover', (e) => {
            e.preventDefault();
            videoDropzone.style.borderColor = 'var(--accent-color)';
        });

        videoDropzone.addEventListener('dragleave', (e) => {
            e.preventDefault();
            videoDropzone.style.borderColor = 'var(--border-color)';
        });

        videoDropzone.addEventListener('drop', (e) => {
            e.preventDefault();
            videoDropzone.style.borderColor = 'var(--border-color)';
            videoDropzone.classList.add('loading');
            videoErrorMessage.textContent = '';

            const file = e.dataTransfer.files[0];
            if (file) {
                if (file.size > MAX_FILE_SIZE_BYTES) {
                    videoErrorMessage.textContent = `Hold your horses! It looks like your file is over ${MAX_FILE_SIZE_GB}GB. We are working on making it accessible. Don't worry!`;
                    videoDropzone.classList.remove('loading');
                    return;
                }
                if (file.type.startsWith('video/')) {
                    const videoURL = URL.createObjectURL(file);
                    droppedVideo.src = videoURL;
                    videoContainer.style.display = 'block';
                    droppedVideo.onloadedmetadata = () => {
                        videoDropzone.classList.remove('loading');
                    };
                    droppedVideo.onerror = (error) => {
                        videoErrorMessage.textContent = `Ruh roh raggy, here is what went wrong: Error loading the video file (${error.message})`;
                        videoDropzone.classList.remove('loading');
                        videoContainer.style.display = 'none';
                        droppedVideo.src = '';
                    };
                } else if (file.type === "text/html") {
                    videoErrorMessage.textContent = "Ruh roh raggy, this area is for videos! Try the 'Play an HTML File' section.";
                    videoDropzone.classList.remove('loading');
                } else {
                    videoErrorMessage.textContent = "Ruh roh raggy, that doesn't look like a video file!";
                    videoDropzone.classList.remove('loading');
                }
            } else {
                videoDropzone.classList.remove('loading');
            }
        });
    </script>

</body>
</html>
